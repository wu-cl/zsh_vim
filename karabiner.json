{
  "title": "Key settings for keyboard.",
  "rules": [
      {
          "description":"Change CapsLock to Fn && Double Tap CapsLock to ESC",
          "manipulators":[
              {
                  "type":"basic",
                  "from":{
                      "key_code":"caps_lock",
                      "modifiers":{
                          "optional":[
                              "any"
                          ]
                      }
                  },
                  "to":[
                      {
                          "key_code":"escape"
                      }
                  ],
                  "conditions":[
                      {
                          "type":"variable_if",
                          "name":"caps_lock_pressed",
                          "value":1
                      }
                  ]
              },
              {
                  "type":"basic",
                  "from":{
                      "key_code":"caps_lock",
                      "modifiers":{
                          "optional":[
                              "any"
                          ]
                      }
                  },
                  "to":[
                      {
                          "set_variable":{
                              "name":"caps_lock_pressed",
                              "value":1
                          }
                      },
                      {
                          "key_code":"fn"
                      }
                  ],
                  "to_delayed_action":{
                      "to_if_invoked":[
                          {
                              "set_variable":{
                                  "name":"caps_lock_pressed",
                                  "value":0
                              }
                          }
                      ],
                      "to_if_canceled":[
                          {
                              "set_variable":{
                                  "name":"caps_lock_pressed",
                                  "value":0
                              }
                          }
                      ]
                  }
              }
          ]
      },
      {
        "description": "Change Fn-E to ESC",
        "manipulators": [
            {
              "type": "basic",

              "from": {
                "key_code": "e",
                "modifiers": {
                  "mandatory": ["fn"],
                  "optional": [
                    "caps_lock",
                    "option",
                    "command",
                    "shift",
                    "control"
                  ]
                }
              },

              "to": [
                {
                  "key_code": "escape"
                }
              ]
          }
        ]
      },
      {
        "description": "Change Fn-HJKL to Arrow left,down,up,right",
        "manipulators": [
          {
              "type": "basic",

              "from": {
                "key_code": "h",
                "modifiers": {
                  "mandatory": ["fn"],
                  "optional": [
                    "caps_lock",
                    "option",
                    "command",
                    "shift",
                    "control"
                  ]
                }
              },

              "to": [
                {
                  "key_code": "left_arrow"
                }
              ]
          },
          {
              "type": "basic",

              "from": {
                "key_code": "j",
                "modifiers": {
                  "mandatory": ["fn"],
                  "optional": [
                    "caps_lock",
                    "option",
                    "command",
                    "shift",
                    "control"
                  ]
                }
              },

              "to": [
                {
                  "key_code": "down_arrow"
                }
              ]
          },
          {
              "type": "basic",

              "from": {
                "key_code": "k",
                "modifiers": {
                  "mandatory": ["fn"],
                  "optional": [
                    "caps_lock",
                    "option",
                    "command",
                    "shift",
                    "control"
                  ]
                }
              },

              "to": [
                {
                  "key_code": "up_arrow"
                }
              ]
          },
          {
              "type": "basic",

              "from": {
                "key_code": "l",
                "modifiers": {
                  "mandatory": ["fn"],
                  "optional": [
                    "caps_lock",
                    "option",
                    "command",
                    "shift",
                    "control"
                  ]
                }
              },

              "to": [
                {
                  "key_code": "right_arrow"
                }
              ]
          }
        ]
      }
  ]
}
